import React, { useRef, useState } from 'react';
import { useTheme } from "next-themes"


interface MenuBarProps {
  onRetract: () => void;
  isPinned: boolean;
  onTogglePin: () => void;
}

const MenuBar: React.FC<MenuBarProps> = ({ onRetract, isPinned, onTogglePin }) => {
  const [showShortcuts, setShowShortcuts] = useState(false);
  const extraPropertiesDrag: React.CSSProperties = {
    WebkitAppRegion: "drag"
  } as React.CSSProperties;

  const extraPropertiesNoDrag: React.CSSProperties = {
    WebkitAppRegion: "no-drag"
  } as React.CSSProperties;

  return (

<div id="dragArea" className="flex items-center justify-between overflow-auto border-b bg-navbar px-4 py-2.5 backdrop-blur transition-all duration-300 ease-in-out drag rounded-r-none"
  style={extraPropertiesDrag}>
    <div className="text-lg font-semibold text-blue-600" style={extraPropertiesDrag}>
      <svg
        width={50}
        height={20 }
        viewBox="3.49 43.12 88.25 37.25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        {useTheme().theme === "light" ? (
          <>
            <path d="M14.7168 50.8252C12.1387 50.8252 9.72168 52.2396 7.46582 55.0684V68.2275C7.46582 68.7646 7.26888 69.2301 6.875 69.624C6.48112 70.0179 6.01562 70.2148 5.47852 70.2148C4.94141 70.2148 4.47591 70.0179 4.08203 69.624C3.68815 69.2301 3.49121 68.7646 3.49121 68.2275V49.375C3.49121 48.8021 3.67025 48.3187 4.02832 47.9248C4.4222 47.5309 4.9056 47.334 5.47852 47.334C6.01562 47.334 6.48112 47.5309 6.875 47.9248C7.26888 48.2829 7.46582 48.7663 7.46582 49.375V51.2012C8.64746 49.9837 9.66797 49.1064 10.5273 48.5693C12.1745 47.6025 13.75 47.1191 15.2539 47.1191C16.7936 47.1191 18.0469 47.3519 19.0137 47.8174C19.9805 48.2471 20.804 48.8737 21.4844 49.6973C22.8451 51.3086 23.5254 53.3138 23.5254 55.7129V68.2275C23.5254 68.7646 23.3285 69.2301 22.9346 69.624C22.5407 70.0179 22.0752 70.2148 21.5381 70.2148C21.001 70.2148 20.5355 70.0179 20.1416 69.624C19.7477 69.2301 19.5508 68.7646 19.5508 68.2275V56.1426C19.5508 54.4954 19.1748 53.2064 18.4229 52.2754C17.6709 51.3086 16.4355 50.8252 14.7168 50.8252ZM47.1582 47.334C47.7311 47.334 48.1966 47.5309 48.5547 47.9248C48.9486 48.3187 49.1455 48.7305 49.1455 49.1602C49.1455 49.5898 49.0918 49.9121 48.9844 50.127L37.0068 78.9697C36.6488 79.9007 36.04 80.3662 35.1807 80.3662C34.6794 80.3662 34.2318 80.1693 33.8379 79.7754C33.4798 79.3815 33.3008 78.9876 33.3008 78.5938C33.3008 78.2357 33.3366 77.9313 33.4082 77.6807L36.2549 70.3223L27.9834 50.1807C27.876 49.8942 27.8223 49.554 27.8223 49.1602C27.8223 48.7305 28.0013 48.3187 28.3594 47.9248C28.7533 47.5309 29.1829 47.334 29.6484 47.334C30.6152 47.334 31.2777 47.7458 31.6357 48.5693L38.4033 65.3809L45.332 48.623C45.6901 47.7279 46.2988 47.2982 47.1582 47.334ZM57.6318 51.2549C59.7087 48.4977 62.0182 47.1191 64.5605 47.1191H64.7754C65.3125 47.1191 65.7601 47.3161 66.1182 47.71C66.512 48.068 66.709 48.5335 66.709 49.1064C66.709 49.6794 66.512 50.1449 66.1182 50.5029C65.7243 50.8252 65.2409 50.9863 64.668 50.9863H64.4531C62.985 50.9863 61.6781 51.3444 60.5322 52.0605C59.3864 52.7767 58.4196 53.7077 57.6318 54.8535V68.2275C57.6318 68.7646 57.4349 69.2301 57.041 69.624C56.6471 70.0179 56.1816 70.2148 55.6445 70.2148C55.1074 70.2148 54.6419 70.0179 54.248 69.624C53.8542 69.2301 53.6572 68.7646 53.6572 68.2275V49.375C53.6572 48.8379 53.8363 48.3724 54.1943 47.9785C54.5882 47.5488 55.0716 47.334 55.6445 47.334C56.1816 47.334 56.6471 47.5309 57.041 47.9248C57.4349 48.3187 57.6318 48.8021 57.6318 49.375V51.2549ZM80.5127 47.1191C83.9144 47.1191 86.6536 48.1934 88.7305 50.3418C90.8073 52.526 91.8099 55.3369 91.7383 58.7744C91.7383 62.2477 90.7357 65.0586 88.7305 67.207C86.6536 69.3555 83.9144 70.4297 80.5127 70.4297C77.0752 70.4297 74.3538 69.3555 72.3486 67.207C70.2718 65.0586 69.2334 62.2477 69.2334 58.7744C69.2334 55.2653 70.2718 52.4544 72.3486 50.3418C74.3538 48.1934 77.0752 47.1191 80.5127 47.1191ZM75.5713 65.0049C76.2874 65.6136 77.0752 66.0612 77.9346 66.3477C78.8298 66.6341 79.6891 66.7773 80.5127 66.7773C81.3363 66.7773 82.1777 66.6341 83.0371 66.3477C83.8965 66.0612 84.6842 65.5957 85.4004 64.9512C86.9759 63.5189 87.7637 61.4421 87.7637 58.7207C87.7637 56.071 86.9759 54.012 85.4004 52.5439C84.0755 51.3265 82.4463 50.7357 80.5127 50.7715C77.3258 50.7715 75.1237 52.2038 73.9062 55.0684C73.4766 56.1068 73.2617 57.3421 73.2617 58.7744C73.2617 60.2067 73.4766 61.4421 73.9062 62.4805C74.3359 63.5189 74.891 64.3604 75.5713 65.0049Z" fill="#D9D9D9"/>
            <path d="M81.0895 55.3361C80.9159 55.2167 80.699 55.2167 80.5689 55.3361C79.7445 55.9331 77.3583 57.764 77.3583 59.953C77.3583 61.7042 78.9202 63.137 80.8292 63.137C82.7381 63.137 84.3 61.7042 84.3 59.953C84.3 57.8038 81.9138 55.9331 81.0895 55.3361Z" fill="#D9D9D9"/>
            <g className="mix-blend-mode:hard-light">
            <path d="M82.3167 59.6849C82.3167 60.502 81.6507 61.1644 80.8292 61.1644C80.0076 61.1644 79.3417 60.502 79.3417 59.6849C79.3417 58.8678 80.0076 58.2055 80.8292 58.2055C81.6507 58.2055 82.3167 58.8678 82.3167 59.6849Z" fill="#1E1E1E"/>
            </g>
          </>
        ) : (
          <>
            <path d="M14.7168 50.8252C12.1387 50.8252 9.72168 52.2396 7.46582 55.0684V68.2275C7.46582 68.7646 7.26888 69.2301 6.875 69.624C6.48112 70.0179 6.01562 70.2148 5.47852 70.2148C4.94141 70.2148 4.47591 70.0179 4.08203 69.624C3.68815 69.2301 3.49121 68.7646 3.49121 68.2275V49.375C3.49121 48.8021 3.67025 48.3187 4.02832 47.9248C4.4222 47.5309 4.9056 47.334 5.47852 47.334C6.01562 47.334 6.48112 47.5309 6.875 47.9248C7.26888 48.2829 7.46582 48.7663 7.46582 49.375V51.2012C8.64746 49.9837 9.66797 49.1064 10.5273 48.5693C12.1745 47.6025 13.75 47.1191 15.2539 47.1191C16.7936 47.1191 18.0469 47.3519 19.0137 47.8174C19.9805 48.2471 20.804 48.8737 21.4844 49.6973C22.8451 51.3086 23.5254 53.3138 23.5254 55.7129V68.2275C23.5254 68.7646 23.3285 69.2301 22.9346 69.624C22.5407 70.0179 22.0752 70.2148 21.5381 70.2148C21.001 70.2148 20.5355 70.0179 20.1416 69.624C19.7477 69.2301 19.5508 68.7646 19.5508 68.2275V56.1426C19.5508 54.4954 19.1748 53.2064 18.4229 52.2754C17.6709 51.3086 16.4355 50.8252 14.7168 50.8252ZM47.1582 47.334C47.7311 47.334 48.1966 47.5309 48.5547 47.9248C48.9486 48.3187 49.1455 48.7305 49.1455 49.1602C49.1455 49.5898 49.0918 49.9121 48.9844 50.127L37.0068 78.9697C36.6488 79.9007 36.04 80.3662 35.1807 80.3662C34.6794 80.3662 34.2318 80.1693 33.8379 79.7754C33.4798 79.3815 33.3008 78.9876 33.3008 78.5938C33.3008 78.2357 33.3366 77.9313 33.4082 77.6807L36.2549 70.3223L27.9834 50.1807C27.876 49.8942 27.8223 49.554 27.8223 49.1602C27.8223 48.7305 28.0013 48.3187 28.3594 47.9248C28.7533 47.5309 29.1829 47.334 29.6484 47.334C30.6152 47.334 31.2777 47.7458 31.6357 48.5693L38.4033 65.3809L45.332 48.623C45.6901 47.7279 46.2988 47.2982 47.1582 47.334ZM57.6318 51.2549C59.7087 48.4977 62.0182 47.1191 64.5605 47.1191H64.7754C65.3125 47.1191 65.7601 47.3161 66.1182 47.71C66.512 48.068 66.709 48.5335 66.709 49.1064C66.709 49.6794 66.512 50.1449 66.1182 50.5029C65.7243 50.8252 65.2409 50.9863 64.668 50.9863H64.4531C62.985 50.9863 61.6781 51.3444 60.5322 52.0605C59.3864 52.7767 58.4196 53.7077 57.6318 54.8535V68.2275C57.6318 68.7646 57.4349 69.2301 57.041 69.624C56.6471 70.0179 56.1816 70.2148 55.6445 70.2148C55.1074 70.2148 54.6419 70.0179 54.248 69.624C53.8542 69.2301 53.6572 68.7646 53.6572 68.2275V49.375C53.6572 48.8379 53.8363 48.3724 54.1943 47.9785C54.5882 47.5488 55.0716 47.334 55.6445 47.334C56.1816 47.334 56.6471 47.5309 57.041 47.9248C57.4349 48.3187 57.6318 48.8021 57.6318 49.375V51.2549ZM80.5127 47.1191C83.9144 47.1191 86.6536 48.1934 88.7305 50.3418C90.8073 52.526 91.8099 55.3369 91.7383 58.7744C91.7383 62.2477 90.7357 65.0586 88.7305 67.207C86.6536 69.3555 83.9144 70.4297 80.5127 70.4297C77.0752 70.4297 74.3538 69.3555 72.3486 67.207C70.2718 65.0586 69.2334 62.2477 69.2334 58.7744C69.2334 55.2653 70.2718 52.4544 72.3486 50.3418C74.3538 48.1934 77.0752 47.1191 80.5127 47.1191ZM75.5713 65.0049C76.2874 65.6136 77.0752 66.0612 77.9346 66.3477C78.8298 66.6341 79.6891 66.7773 80.5127 66.7773C81.3363 66.7773 82.1777 66.6341 83.0371 66.3477C83.8965 66.0612 84.6842 65.5957 85.4004 64.9512C86.9759 63.5189 87.7637 61.4421 87.7637 58.7207C87.7637 56.071 86.9759 54.012 85.4004 52.5439C84.0755 51.3265 82.4463 50.7357 80.5127 50.7715C77.3258 50.7715 75.1237 52.2038 73.9062 55.0684C73.4766 56.1068 73.2617 57.3421 73.2617 58.7744C73.2617 60.2067 73.4766 61.4421 73.9062 62.4805C74.3359 63.5189 74.891 64.3604 75.5713 65.0049Z" fill="#1E1E1E"/>
            <path d="M80.7625 55.0908C80.5875 54.9697 80.3687 54.9697 80.2375 55.0908C79.4062 55.6961 77 57.5523 77 59.7718C77 61.5473 78.575 63 80.5 63C82.425 63 84 61.5473 84 59.7718C84 57.5927 81.5938 55.6961 80.7625 55.0908Z" fill="#1E1E1E"/>
            <g className="[mix-blend-mode:difference]">
            <path d="M82 59.5C82 60.3284 81.3284 61 80.5 61C79.6716 61 79 60.3284 79 59.5C79 58.6716 79.6716 58 80.5 58C81.3284 58 82 58.6716 82 59.5Z" fill="#D9D9D9"/>
            </g>
          </>
        )}
      </svg>
    </div>
      <div className="flex" style={extraPropertiesNoDrag}>
        <button 
          className="ml-2.5 cursor-pointer rounded-full border-none bg-transparent p-0.5 transition-all duration-200 ease-in-out hover:bg-black/5 active:scale-95"
          title={isPinned ? "Unpin" : "Pin"} 
          onClick={onTogglePin}
        >
          {isPinned ? (
            <svg aria-hidden="true" role="img" className="size-4 fill-current text-gray-600 transition-colors duration-200 hover:text-blue-600" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
              <path fillRule="evenodd" d="M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1l1-1v-7H19v-2c-1.66 0-3-1.34-3-3"></path>
            </svg>
          ) : (
            <svg aria-hidden="true" role="img" className="size-4 fill-current text-gray-600 transition-colors duration-200 hover:text-blue-600" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
              <path d="M14 4v5c0 1.12.37 2.16 1 3H9c.65-.86 1-1.9 1-3V4zm3-2H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1l1-1v-7H19v-2c-1.66 0-3-1.34-3-3V4h1c.55 0 1-.45 1-1s-.45-1-1-1"></path>
            </svg>
          )}
        </button>
        <button 
          className="ml-2.5 cursor-pointer rounded-full border-none bg-transparent p-0.5 transition-all duration-200 ease-in-out hover:bg-black/5 active:scale-95"
          title="Retract" 
          onClick={onRetract}
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" className="size-4 fill-gray-600 transition-colors duration-300 hover:fill-gray-800">
          <path fill="none" d="M0 0h24v24H0z"/>
          <path d="M13.172 12l-4.95-4.95 1.414-1.414L16 12l-6.364 6.364-1.414-1.414z"/>
        </svg>
        </button>
      </div>
    </div>
  );
};

export default MenuBar;